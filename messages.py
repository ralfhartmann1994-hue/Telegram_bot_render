# messages.py
import random
import time
from stickers import STICKERS

# Messages constants (ุนุฑุจู)
WELCOME = "๐ ูุฑุญุจูุง ุจู! ุงุณุชุฎุฏู ุงูุฃุฒุฑุงุฑ ููุจุฏุก."
HELP = (
    "๐ <b>ูุณุงุนุฏุฉ</b>\n"
    "โข ๐ค ูููู โ ุนุฑุถ ุจูุงูุงุชู.\n"
    "โข โ๏ธ ุชุนุฏูู ุงูุงุณู / ๐ ุชุนุฏูู ุงูุนูุฑ.\n"
    "โข ๐ ุงูุจุญุซ ุนู ุฏุฑุฏุดุฉ โ ุชุฎุชุงุฑ ููุถูุนูุง + ุฌูุณ ุงูุทุฑู ุงูุขุฎุฑ ุซู ูุจุญุซ ููุฏุฉ 30 ุฏูููุฉ.\n"
    "โข ุฃุซูุงุก ุงูุฏุฑุฏุดุฉ: ๐จ ุฅุจูุงุบุ ๐ช ูุบุงุฏุฑุฉ (ุจุนุฏ 30 ุซุงููุฉ) ูุน ุชุฃููุฏ.\n"
)

WELCOME_MESSAGE = "๐ ุฃููุงู ุจู ูู ุงูุจูุช!"
ASK_NAME = "ูุง ุงุณููุ"
ASK_GENDER = "ุงุฎุชุฑ ุฌูุณู:"
ASK_AGE = "ูู ุนูุฑูุ"

PROFILE_SAVED = """โ ุชู ุญูุธ ูููู:
ุงูุงุณู: {name}
ุงูุฌูุณ: {gender}
ุงูุนูุฑ: {age}"""

SEARCHING = "โณ ุฌุงุฑู ุงูุจุญุซ ุนู ุดุฑูู ููุงุณุจโฆ ุงุจูู ููุง ุฃู ุนุฏ ูููุงุฆูุฉุ ุณูุฎุจุฑู ุฅู ูุฌุฏูุง ุดุฑูููุง."
NO_MATCH = "โ ูู ูุฌุฏ ุดุฑูููุง ุฎูุงู ุงููุฏุฉ ุงููุญุฏุฏุฉ. ุฌุฑูุจ ูุฑุฉ ุฃุฎุฑู ูุงุญููุง โ ุณูุณุนู ููุทุงุจูุชู."
INTRO_PARTNER = (
    "โ <b>ุชู ุงูุนุซูุฑ ุนูู ุดุฑูู ููุฏุฑุฏุดุฉ!</b>\n"
    "โจ ุชุฐููุฑ: ูุง ุชูุธูุฑ ุฃู ูุนูููุงุช ุญุณุงุณุฉุ ูุงุญุชุฑู ุงูุทุฑู ุงูุขุฎุฑ.\n"
    "ุงุจุฏุฃ ุงูุญุฏูุซ ุจูุทู ๐"
)
LEAVE_CONFIRM = "โ๏ธ ูู ุชุฑูุฏ ูุบุงุฏุฑุฉ ุงูุฏุฑุฏุดุฉุ\nุงุฎุชุฑ: ูุนู โ / ูุง โ"
LEAVE_TOO_SOON = "โณ ููููู ุงููุบุงุฏุฑุฉ ุจุนุฏ {remain} ุซุงููุฉ."
LEFT_YOU = "๐ช ุชู ุฅููุงุก ุงูุฏุฑุฏุดุฉ. ุนุฏุชู ุฅูู ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ."
LEFT_PARTNER = "โน๏ธ ุฃููู ุงูุทุฑู ุงูุขุฎุฑ ุงูุฏุฑุฏุดุฉ. ููููู ุจุฏุก ูุญุงุฏุซุฉ ุฌุฏูุฏุฉ."

REPORT_CONFIRM = "๐จ ูู ุชุฑูุฏ ุฅุฑุณุงู ุจูุงุบ ููุฑุงุฌุนุฉ ุขุฎุฑ ุงูุฑุณุงุฆูุ ูุนู โ / ูุง โ"
REPORT_OK = "โ ุชู ุงุณุชูุงู ุงูุจูุงุบ ูุณูุฑุงุฌุนู."
REPORT_RESULT = "๐ ูุชูุฌุฉ ุงููุฑุงุฌุนุฉ:\n{lines} ุฑุณุงูุฉ\nโข ูููุงุช ูุณูุฆุฉ: {badwords}\nโข ููุงุท ูุฎุตููุฉ: {penalty}\n\nุงูุงุญุชุฑุงู ุงูุขู: {new_respect}."
MUTED = "โณ ุฃูุช ุชุญุช ุญุธุฑ ูุคูุช ุญุชู ุงูุชูุงุก ุงููุฏุฉ (~{left} ุซุงููุฉ)."
BANNED = "๐ซ ุญุณุงุจู ูุญุธูุฑ ุจุณุจุจ ูุฎุงููุงุช ูุชูุฑุฑุฉ."

# start messages pools
START_MESSAGES = [
    "๐ ุฃููุงู ุฃููุงูโฆ ุญุถูุฑ ููุณูุ ูููู ุชุถุญู ุฃู ูููู ุชูุฏู ุนูู ุฏุฎููู!",
    "๐ ููุง ุจู! ูุฐุง ุงูุจูุช ูุซู ุญูุจุฉ ูุตุงุฑุนุฉโฆ ุจุณ ุจุงูุณูุงูู ูุงูููุช.",
    "๐ ุฏุฎูุช ุนุงูู ุงูุณุคุงูโฆ ูู ุดูุก ูููู ูุญุฏุซุ ุญุชู ุถุญู ุนูู ุบุฑุงุฆุจ ููุณู!",
    "๐ฅ ููุง! ูุง ุชุดูู ููุ ูู ุงููู ุฑุงุญ ูุณูู ูู ุงูุจูุช ูู ุฅูู ููุตูู ูุดุฎุต ุบุฑูุจ ููุงูุดู ูู ููุงุถูุนู.",
    "๐ ุญุจูุจูุ ุงูุชุจู: ุจุนุถ ุงููุงุณ ููู ูููู ูููุชูุง ุนูู ุทููโฆ ูุจุนุถูู ุนูู ุญุณุงุจู!",
    "ููุฏ ูุตูุช ุงูู ุทุฑูู ูุณุฏูุฏ.. ุจุณ ูููุชุญู ูุฑูุงูู ๐",
    "ุชูุถู ูุง ูููุงู...",
    "ุงู ุชูุถู ุชูุถู ุชูุถู โค๏ธโค๏ธ"
]

FOOTBALL_MESSAGES = [
    "โฝ ุฏุฎูุช ุนุงูู ุงููุฑุฉโฆ ูู ุฃูุช ูุน ุจุฑุดูููุฉุ ุฃู ูู ูุฑููู ุณูุฎุณุฑ ุฃูุงู ุฑูุงู ูุฏุฑูุฏ ูุฑุฉ ุฃุฎุฑู ๐",
    "๐ ูููุฑุจูู ูุง ุบุงูู! ุญุถุฑ ุดุงููุ ุงููุจุงุฑุงุฉ ุงูููุงููุฉ ุจุฏุฃุช ๐",
]

POLITICS_MESSAGES = [
    "๐ ุงููุงู ูู ุณุงุญุฉ ุงูุณูุงุณุฉโฆ ูู ุงูุญูููุงุช ุชุฎุจุฑูุง ูู ุงูุญูููุฉุ",
]

RELIGION_MESSAGES = [
    "๐ ุฃููุงู ุจูโฆ ููุง ููุงูุด ุงูุฏูู ูุงูุฃููุงุฑ ุจุญููุฉุ ูุน ุงุญุชุฑุงู ุงูุฌููุน.",
]

PHILOSOPHY_MESSAGES = [
    "๐ค ูุง ูุนูู ุฃู ุชููู ููุฌูุฏูุงุ ูู ุงููุฌูุฏ ูุฌุฑุฏ ุตุฏูุฉ ุฃู ุงุฎุชูุงุฑุ",
]

SOCIAL_MESSAGES = [
    "๐ฌ ูุฑุญุจูุง ุจูโฆ ุงูุจุดุฑ ุฎูููุง ููุชุนุงุฑูุ ููุญุชุฑู ุจุนุถูุง ููุชุนูู ูู ุจุนุถูุง.",
]

def get_welcome_message(topic=None):
    if topic == "START":
        return random.choice(START_MESSAGES)
    if not topic:
        return random.choice(START_MESSAGES)
    t = topic.lower()
    if "ุฑูุงุถ" in t or "โฝ" in topic:
        return random.choice(FOOTBALL_MESSAGES)
    if "ุณูุงุณ" in t:
        return random.choice(POLITICS_MESSAGES)
    if "ุฏูู" in t:
        return random.choice(RELIGION_MESSAGES)
    if "ููุณู" in t or "ููุณูุฉ" in t:
        return random.choice(PHILOSOPHY_MESSAGES)
    if "ุชุนุงุฑู" in t or "ุณูุด" in t:
        return random.choice(SOCIAL_MESSAGES)
    return random.choice(START_MESSAGES)

# webhook-safe send (no sleep)
def delayed_send(bot, chat_id, text, **kwargs):
    # remove delay if provided mistakenly
    kwargs.pop("delay", None)
    try:
        bot.send_message(chat_id, text, **kwargs)
    except Exception as e:
        print(f"[delayed_send ERROR] {e} | chat_id={chat_id} | text_preview={str(text)[:120]}")
